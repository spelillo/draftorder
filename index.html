<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spinny Wheel</title>
    <style>
        body {
            min-height: 100vh;
            margin: 0;
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            background: url('arnold.jpg') center center / cover no-repeat fixed;
        }
        
        
        .main-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100vw;
            height: 100vh;
        }
        /* ...existing code... */
    </style>
    <style>
    .slide-in-draft {
        animation: slideInDraft 1.2s cubic-bezier(.68,-0.55,.27,1.55) forwards;
    }
    @keyframes slideInDraft {
        0% { opacity: 0; transform: translateY(-120px) scale(0.7) rotate(-10deg); }
        70% { opacity: 1; transform: translateY(10px) scale(1.1) rotate(5deg); }
        100% { opacity: 1; transform: translateY(0) scale(1) rotate(0deg); }
    }
    </style>
</head>
<body>
    <div class="main-content">
        <div class="race-track-container">
            <div class="race-track" id="race-track">
                <!-- Ducks will be injected here -->
            </div>
        </div>
        <button id="startRaceBtn">Start Duck Race</button>
        <div id="race-result"></div>
        <div id="race-popup" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.7);z-index:2000;justify-content:center;align-items:center;">
            <div style="background:#fff;padding:40px 30px;border-radius:30px;box-shadow:0 0 40px #000a;max-width:700px;width:90vw;">
                <h2 style="text-align:center;margin-bottom:20px;">Final Draft Order</h2>
                <div id="final-order-list" style="display:flex;flex-direction:column;gap:18px;"></div>
                <button id="close-popup" style="margin-top:30px;padding:12px 40px;font-size:1.3em;border-radius:10px;background:#3498db;color:#fff;border:none;cursor:pointer;">Close</button>
            </div>
        </div>
        <table id="draft-table" style="margin-top:40px;width:900px;max-width:90vw;border-collapse:separate;border-spacing:20px 0;">
            <tr id="draft-row">
                <td class="draft-cell"></td>
                <td class="draft-cell"></td>
                <td class="draft-cell"></td>
                <td class="draft-cell"></td>
                <td class="draft-cell"></td>
                <td class="draft-cell"></td>
                <td class="draft-cell"></td>
                <td class="draft-cell"></td>
                <td class="draft-cell"></td>
                <td class="draft-cell"></td>
            </tr>
        </table>
    </div>
    <script>
        // Duck race implementation
        const duckNames = [
            'Aidan', 'Mikey', 'Connor', 'Silva', 'Gavin',
            'Chase', 'Kilby', 'Morris', 'Max', 'Sean'
        ];
        const duckImages = {
            'Aidan': 'aidan.png',
            'Mikey': 'mikey.png',
            'Connor': 'connor.png',
            'Silva': 'silva.png',
            'Gavin': 'gavin.png',
            'Chase': 'chase.png',
            'Kilby': 'kilby.JPG',
            'Morris': 'morris.png',
            'Max': 'max.png',
            'Sean': 'sean.jpg'
        };
        let finishedOrder = [];
        let raceStarted = false;

        function createDuckElement(name, idx) {
            const duck = document.createElement('div');
            duck.className = 'duck';
            duck.style.top = `${30 + idx * 60}px`;
            duck.style.left = '0px';
            duck.setAttribute('data-name', name);
            duck.setAttribute('data-idx', idx);
            // Duck body: face overlays duck.webp's head
            duck.innerHTML = `
                <div class="duck-body">
                    <img src="duck.webp" alt="Duck" class="duck-img">
                    <img src="${duckImages[name]}" alt="${name}" class="duck-face">
                </div>
                <div class="duck-label">${name}</div>
            `;
            return duck;
        }

        function startDuckRace() {
            if (raceStarted) return;
            raceStarted = true;
            finishedOrder = [];
            document.getElementById('race-result').textContent = '';
            // Clear table
            document.querySelectorAll('.draft-cell').forEach(cell => cell.innerHTML = '');
            // Remove previous ducks
            const track = document.getElementById('race-track');
            track.innerHTML = '';
            // Add finish line
            const finishLine = document.createElement('div');
            finishLine.className = 'finish-line';
            track.appendChild(finishLine);
            // Create ducks
            const ducks = [];
            for (let i = 0; i < duckNames.length; i++) {
                const duck = createDuckElement(duckNames[i], i);
                track.appendChild(duck);
                ducks.push(duck);
            }
            // Animate ducks
            const trackWidth = track.offsetWidth - 120;
            const startTime = performance.now();
            let finished = 0;
            let duckFinishTimes = Array(10).fill(0);
            // Assign each duck a random speed at the start
            const duckSpeeds = Array.from({length: 10}, () => 0.7 + Math.random() * 0.6);
            function animateRace(now) {
                const elapsed = now - startTime;
                for (let i = 0; i < ducks.length; i++) {
                    if (duckFinishTimes[i]) continue;
                    // Use assigned speed for each duck
                    const speed = duckSpeeds[i];
                    // Linear progress for each duck
                    let progress = Math.min(1, (elapsed * speed) / 30000);
                    ducks[i].style.left = `${progress * trackWidth}px`;
                    if (progress >= 1 && !duckFinishTimes[i]) {
                        duckFinishTimes[i] = elapsed;
                        finished++;
                        finishedOrder.push({ name: duckNames[i], img: duckImages[duckNames[i]] });
                        // Update table: only face in cell, name in label above
                        const cells = document.querySelectorAll('.draft-cell');
                        const idx = finishedOrder.length - 1;
                        if (idx < cells.length) {
                            const wrapper = document.createElement('div');
                            wrapper.style.display = 'flex';
                            wrapper.style.flexDirection = 'column';
                            wrapper.style.alignItems = 'center';
                            // Draft number and name above
                            const label = document.createElement('div');
                            label.textContent = `${idx + 1}. ${duckNames[i]}`;
                            label.style.fontWeight = 'bold';
                            label.style.fontSize = '1.2em';
                            label.style.marginBottom = '6px';
                            label.style.textAlign = 'center';
                            label.style.color = '#222';
                            wrapper.appendChild(label);
                            // Only face image (not duck) in cell
                            const img = document.createElement('img');
                            img.src = duckImages[duckNames[i]];
                            img.alt = duckNames[i];
                            img.className = 'winner-img slide-in-draft';
                            img.style.width = '54px';
                            img.style.height = '54px';
                            img.style.objectFit = 'cover';
                            img.style.borderRadius = '50%';
                            img.style.boxShadow = '0 0 10px #000a';
                            wrapper.appendChild(img);
                            cells[idx].appendChild(wrapper);
                        }
                        // Duck finish animation
                        ducks[i].classList.add('duck-finished');
                    }
                }
                if (finished < ducks.length) {
                    requestAnimationFrame(animateRace);
                } else {
                    // Show winner sequence, then popup
                    showWinnerSequence();
                }
            }
            requestAnimationFrame(animateRace);
        }

        function showWinnerSequence() {
            let idx = 0;
            const overlay = document.createElement('div');
            overlay.id = 'winner-sequence-overlay';
            overlay.style.position = 'fixed';
            overlay.style.top = '0';
            overlay.style.left = '0';
            overlay.style.width = '100vw';
            overlay.style.height = '100vh';
            overlay.style.background = 'rgba(0,0,0,0.92)';
            overlay.style.zIndex = '3000';
            overlay.style.display = 'flex';
            overlay.style.flexDirection = 'column';
            overlay.style.justifyContent = 'center';
            overlay.style.alignItems = 'center';
            document.body.appendChild(overlay);

            function showNext() {
                overlay.innerHTML = '';
                if (idx >= finishedOrder.length) {
                    overlay.remove();
                    showFinalOrderPopup();
                    return;
                }
                const entry = finishedOrder[idx];
                const placeNames = ['1st','2nd','3rd','4th','5th','6th','7th','8th','9th','10th'];
                const place = placeNames[idx] || `${idx+1}th`;
                const face = document.createElement('img');
                face.src = entry.img;
                face.alt = entry.name;
                face.style.width = 'min(70vw, 700px)';
                face.style.height = 'auto';
                face.style.maxHeight = '70vh';
                face.style.borderRadius = '40px';
                face.style.boxShadow = '0 0 80px 20px #000a, 0 16px 80px #222a';
                face.style.marginBottom = '40px';
                overlay.appendChild(face);
                const label = document.createElement('div');
                label.textContent = `${place}: ${entry.name}`;
                label.style.fontSize = '3em';
                label.style.fontWeight = 'bold';
                label.style.color = '#fff';
                label.style.textShadow = '0 2px 16px #000a';
                overlay.appendChild(label);
                idx++;
                setTimeout(showNext, 2500);
            }
            showNext();
        }

        function showFinalOrderPopup() {
            const popup = document.getElementById('race-popup');
            const list = document.getElementById('final-order-list');
            list.innerHTML = '';
            finishedOrder.forEach((entry, idx) => {
                const row = document.createElement('div');
                row.style.display = 'flex';
                row.style.alignItems = 'center';
                row.style.gap = '18px';
                row.innerHTML = `<span style="font-weight:bold;font-size:1.2em;width:32px;">${idx + 1}.</span>
                    <img src="${entry.img}" alt="${entry.name}" style="width:60px;height:60px;object-fit:cover;border-radius:14px;box-shadow:0 0 10px #000a;">
                    <span style="font-size:1.2em;">${entry.name}</span>`;
                list.appendChild(row);
            });
            // Add close X button
            if (!document.getElementById('close-x-popup')) {
                const closeX = document.createElement('button');
                closeX.id = 'close-x-popup';
                closeX.innerHTML = '&times;';
                closeX.style.position = 'absolute';
                closeX.style.top = '18px';
                closeX.style.right = '38px';
                closeX.style.fontSize = '2.5em';
                closeX.style.background = 'rgba(0,0,0,0.1)';
                closeX.style.color = '#333';
                closeX.style.border = 'none';
                closeX.style.borderRadius = '50%';
                closeX.style.width = '48px';
                closeX.style.height = '48px';
                closeX.style.cursor = 'pointer';
                closeX.style.zIndex = '10';
                closeX.onclick = () => { popup.style.display = 'none'; };
                popup.appendChild(closeX);
            }
            popup.style.display = 'flex';
        }

        document.getElementById('startRaceBtn').addEventListener('click', startDuckRace);
        document.getElementById('close-popup').addEventListener('click', () => {
            document.getElementById('race-popup').style.display = 'none';
        });
    </script>
    </script>
    <style>
        .race-track-container {
            width: 100vw;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 40px;
            margin-bottom: 20px;
        }
        .race-track {
            position: relative;
            width: 900px;
            height: 650px;
            background: url('water.png') center center / cover no-repeat;
            border-radius: 40px;
            box-shadow: 0 0 40px #0003;
            overflow: hidden;
        }
        .finish-line {
            position: absolute;
            right: 0;
            top: 0;
            width: 12px;
            height: 100%;
            background: repeating-linear-gradient(
                to bottom,
                #fff 0px, #fff 12px,
                #222 12px, #222 24px
            );
            border-left: 4px solid #e74c3c;
            z-index: 20;
        }
        .duck {
            position: absolute;
            width: 120px;
            height: 54px;
            transition: left 0.2s;
            z-index: 10;
        }
        .duck-body {
            position: relative;
            width: 120px;
            height: 54px;
            display: flex;
            align-items: center;
        }
        .duck-img {
            position: absolute;
            left: 0;
            top: 0;
            width: 120px;
            height: 54px;
            object-fit: contain;
            z-index: 1;
        }
        .duck-face {
            position: absolute;
            left: 18px;
            top: 2px;
            width: 38px;
            height: 38px;
            object-fit: cover;
            border-radius: 50%;
            box-shadow: 0 0 8px #000a;
            border: 2px solid #fff;
            z-index: 2;
        }
        .duck-label {
            position: absolute;
            left: 0;
            top: 56px;
            width: 120px;
            text-align: center;
            font-size: 1.1em;
            font-weight: bold;
            color: #222;
            text-shadow: 0 2px 8px #fff8;
        }
        .duck-finished {
            filter: drop-shadow(0 0 20px #ffd700) brightness(1.2);
            opacity: 0.7;
        }
        #startRaceBtn {
            margin-top: 30px;
            padding: 10px 30px;
            font-size: 1.2em;
            border-radius: 8px;
            border: none;
            background: #3498db;
            color: #fff;
            cursor: pointer;
            transition: background 0.2s;
        }
        #startRaceBtn:hover {
            background: #217dbb;
        }
        .slide-in-draft {
            animation: slideInDraft 1.2s cubic-bezier(.68,-0.55,.27,1.55) forwards;
        }
        @keyframes slideInDraft {
            0% { opacity: 0; transform: translateY(-120px) scale(0.7) rotate(-10deg); }
            70% { opacity: 1; transform: translateY(10px) scale(1.1) rotate(5deg); }
            100% { opacity: 1; transform: translateY(0) scale(1) rotate(0deg); }
        }
        #race-popup {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0,0,0,0.7);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }
    </style>
</body>
</html>
